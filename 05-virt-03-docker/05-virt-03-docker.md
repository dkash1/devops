
# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Как сдавать задания

.Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Задача 1

Сценарий выполения задачи:
 
- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;

- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I m DevOps Engineer</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.
## Решение
```
docker run -d -p 80:80 nginx //скачиваем образ и прокидываем порты в свою систему
ps -a //смотрим список запущенных контейнеров
docker exec -it 98b54986d3e0 bash //командой ps -a определили id и подключились в консоль
вносим изменения в index.html:
echo "<html>
<head>
Hey, Netology
</head>
<body>
<h1>I m DevOps Engineer</h1>
</body>
</html>" > index.html 
docker commit dkash-nginx dkash/dkash-nginx //Собираем образ из нашего контейнера, Собираем образ из нашего контейнера
docker login
docker push dkash/docker-nginx  //Заливаем наш образ на хаб



//проверяем что образ скачивается и работает:
docker pull dkash/docker-nginx
docker images
docker run -d -p 80:80 dkash/docker-nginx
docker ps -a
```
ссылка https://hub.docker.com/r/dkash/docker-nginx
## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--
## Решение
Сценарий:

- Высоконагруженное монолитное java веб-приложение;
```
Физическая машина, т.к. это монолит.
```
- Nodejs веб-приложение;
```
Контейнер, т.к. приложение можно и нужно масштабировать.
```
- Мобильное приложение c версиями для Android и iOS;
```
Контейнер, т.к. приложение можно и нужно масштабировать.
```
- Шина данных на базе Apache Kafka;
```
Физическая или виртуальная машина, т.к. требовательность к ресурсам.
```
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
```
Контейнеры, т.к. приложение можно и нужно масштабировать.
```
- Мониторинг-стек на базе Prometheus и Grafana;
```
Контейнеры, т.к. возможно понадобится масштабирование.
```
- MongoDB, как основное хранилище данных для java-приложения;
```
Физическая или виртуальная машина, т.к. требовательность к ресурсам. 
```
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.
```
Виртуальная машина, т.к. не требуется постоянное масштабирование или деплой новой, удобно делать снэпшоты и бэкапы.
```

## Задача 3

## Решение
- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
```
docker run -it -v "/home/kdr/Learn/data1:/data1" --name centos-test centos
```
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
```
docker run -it -v "/home/kdr/Learn/data1:/data1" --name debian-test debian
```
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
```
kdr@kashapovdr:~/Learn$ docker exec -it centos-test bash
[root@e7ce9b33d05f /]# ls
bin  data1  dev  etc  home  lib  lib64	lost+found  media  mnt	opt  proc  root  run  sbin  srv  sys  tmp  usr	var
[root@e7ce9b33d05f /]# cd /data1/
[root@e7ce9b33d05f data1]# echo "hi" > hi.txt
[root@e7ce9b33d05f data1]# ls
fili-from-centos.txt  hi.txt  test1.txt
[root@e7ce9b33d05f data1]# cat hi.txt 
hi
[root@e7ce9b33d05f data1]# 
```
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.
```
kdr@kashapovdr:~/Learn$ docker exec -it debian-test bash
root@9a152b2d364a:/# ls
bin  boot  data1  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run	sbin  srv  sys	tmp  usr  var
root@9a152b2d364a:/# cd data1/
root@9a152b2d364a:/data1# ls
fili-from-centos.txt  hi.txt  test1.txt
root@9a152b2d364a:/data1# cat hi.txt 
hi
root@9a152b2d364a:/data1#
```
## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
